<template>
  <div class = "roboDoc">
  
  <Registration  @login-User=loginUser @register-Employee=registerEmployee ></Registration>

  <Form @create-Patient=createPatient></Form>
  </div>
</template>

<script>

import Form from './Form.vue'
import Registration from './Registration.vue'


export default {
  
  components: { 
     
    Form,
    Registration
    },
  name: 'RoboDoc',
  props: {
    msg: String
  },
 methods:{
    createPatient(form){
      
      /*Patient Objekt wird in der Ebene RoboDoc erstellt, dieser kann zur h√∂heren Ebene App.vue weitergeleitet werden und dort mittels http an den Server gesendet werden*/ 
      this.patient.name = form.name; 
      this.patient.gender = form.gender;
      let currentDate = new Date(); 
      this.patient.age = currentDate.getFullYear() - form.age.substring(0,4);
      this.patient.weight = form.weight; 
      this.patient.height = form.height; 
      this.patient.email = form.email; 
      this.patient.diagnoses = form.diagnoses; 
      this.patient.bloodtype = form.bloodtype; 
      this.patient.bmi = (form.weight) / ((form.height/100) * (form.height/100));
      console.log(JSON.stringify(this.patient));
      alert(JSON.stringify(this.patient));

    },
    loginUser(registration){
      this.user.username = registration.username
      this.user.password = registration.password
      console.log(JSON.stringify(this.uses));
      alert(JSON.stringify(this.user));
    },
    registerEmployee(registration) {
      this.employee.name = registration.name
      this.employee.email = registration.email
      this.employee.username = registration.username
      this.employee.password = registration.password
      console.log(JSON.stringify(this.employee));
      alert(JSON.stringify(this.employee));

    }
  },
  data() {
    return {
      patient:{
        name:'', 
        gender:'', 
        age:'', 
        weight:'', 
        height:'', 
        email:'', 
        diagnoses:'', 
        bloodtype:[], 
        bmi:''
      },
      user:{
        username:'',
        password:'',
      },
      employee:{
        name:'',
        email:'',
        username:'',
        password:'',
      }
    }
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
